"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/messages/page",{

/***/ "(app-pages-browser)/./src/hooks/useChat.ts":
/*!******************************!*\
  !*** ./src/hooks/useChat.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useChat: function() { return /* binding */ useChat; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/api */ \"(app-pages-browser)/./src/utils/api.ts\");\n\n\n// セッション管理をローカルストレージに永続化\nconst STORAGE_KEY = \"chat_sessions\";\nconst useChat = ()=>{\n    const [sessions, setSessions] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [currentSessionId, setCurrentSessionId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [sessionState, setSessionState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const currentSession = sessions.find((s)=>s.id === currentSessionId);\n    const messages = (currentSession === null || currentSession === void 0 ? void 0 : currentSession.messages) || [];\n    // ローカルストレージからセッションを読み込み\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        try {\n            const savedSessions = localStorage.getItem(STORAGE_KEY);\n            if (savedSessions) {\n                const parsed = JSON.parse(savedSessions);\n                // Date オブジェクトを復元\n                const sessionsWithDates = parsed.map((session)=>({\n                        ...session,\n                        createdAt: new Date(session.createdAt),\n                        updatedAt: new Date(session.updatedAt),\n                        messages: session.messages.map((msg)=>({\n                                ...msg,\n                                timestamp: new Date(msg.timestamp)\n                            }))\n                    }));\n                setSessions(sessionsWithDates);\n            }\n        } catch (error) {\n            console.error(\"Failed to load sessions from localStorage:\", error);\n        }\n    }, []);\n    // セッションをローカルストレージに保存\n    const saveSessions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((newSessions)=>{\n        try {\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(newSessions));\n        } catch (error) {\n            console.error(\"Failed to save sessions to localStorage:\", error);\n        }\n    }, []);\n    const createNewSession = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((firstMessage)=>{\n        const sessionId = Date.now().toString();\n        const title = firstMessage.length > 30 ? firstMessage.substring(0, 30) + \"...\" : firstMessage;\n        const newSession = {\n            id: sessionId,\n            title,\n            messages: [],\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        setSessions((prevSessions)=>{\n            const newSessions = [\n                newSession,\n                ...prevSessions\n            ];\n            saveSessions(newSessions);\n            return newSessions;\n        });\n        setCurrentSessionId(sessionId);\n        return sessionId;\n    }, [\n        saveSessions\n    ]);\n    const selectSession = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((sessionId)=>{\n        setCurrentSessionId(sessionId);\n        setError(null);\n    }, []);\n    const startNewChat = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        setCurrentSessionId(null);\n        setError(null);\n    }, []);\n    const convertApiMessageToMessage = (apiMsg)=>({\n            id: apiMsg.id,\n            content: apiMsg.content,\n            role: apiMsg.type === \"ai\" ? \"assistant\" : \"user\",\n            timestamp: new Date(apiMsg.timestamp),\n            searchType: apiMsg.search_type === \"fact\" || apiMsg.search_type === \"network\" ? apiMsg.search_type : undefined\n        });\n    const sendMessage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (content, searchType, flowStep, projectId)=>{\n        let sessionId = currentSessionId;\n        // 新しいセッションを作成（初回メッセージの場合）\n        if (!sessionId) {\n            sessionId = createNewSession(content);\n        }\n        const userMessage = {\n            id: Date.now().toString(),\n            content,\n            role: \"user\",\n            timestamp: new Date(),\n            searchType: searchType === \"fact\" || searchType === \"network\" ? searchType : undefined\n        };\n        // ユーザーメッセージを追加（関数型更新を使用）\n        setSessions((prevSessions)=>{\n            const updatedSessions = prevSessions.map((session)=>session.id === sessionId ? {\n                    ...session,\n                    messages: [\n                        ...session.messages,\n                        userMessage\n                    ],\n                    updatedAt: new Date()\n                } : session);\n            saveSessions(updatedSessions);\n            return updatedSessions;\n        });\n        setIsLoading(true);\n        setError(null);\n        try {\n            // バックエンドにメッセージを送信\n            const requestData = {\n                content,\n                search_type: searchType !== null && searchType !== void 0 ? searchType : \"normal\",\n                flow_step: flowStep,\n                session_id: sessionId,\n                project_id: projectId\n            };\n            let response;\n            let assistantMessage;\n            // 検索タイプが指定されている場合はRAG/通常チャットAPIを優先\n            // （バックエンド側は search_type 優先で処理されるため flow_step 同送でも問題なし）\n            if (searchType === \"fact\" || searchType === \"network\") {\n                response = await _utils_api__WEBPACK_IMPORTED_MODULE_1__.api.sendMessage(requestData);\n                assistantMessage = convertApiMessageToMessage(response);\n            } else if (flowStep) {\n                // フローステップがある場合は柔軟なポリシーシステムを使用\n                const flexibleResponse = await _utils_api__WEBPACK_IMPORTED_MODULE_1__.api.sendFlexiblePolicyMessage(requestData);\n                // セッション状態を更新\n                if (flexibleResponse.full_state) {\n                    setSessionState({\n                        session_id: flexibleResponse.session_id,\n                        project_id: flexibleResponse.project_id,\n                        ...flexibleResponse.full_state\n                    });\n                }\n                assistantMessage = {\n                    id: flexibleResponse.id,\n                    content: flexibleResponse.content,\n                    role: \"assistant\",\n                    timestamp: new Date(flexibleResponse.timestamp),\n                    searchType: undefined\n                };\n            } else {\n                response = await _utils_api__WEBPACK_IMPORTED_MODULE_1__.api.sendMessage(requestData);\n                assistantMessage = convertApiMessageToMessage(response);\n            }\n            // AIレスポンスを追加（関数型更新を使用）\n            setSessions((prevSessions)=>{\n                const finalSessions = prevSessions.map((session)=>session.id === sessionId ? {\n                        ...session,\n                        messages: [\n                            ...session.messages,\n                            assistantMessage\n                        ],\n                        updatedAt: new Date()\n                    } : session);\n                saveSessions(finalSessions);\n                return finalSessions;\n            });\n        } catch (err) {\n            console.error(\"Failed to send message:\", err);\n            let errorMessage = \"メッセージの送信に失敗しました。\";\n            if (err instanceof _utils_api__WEBPACK_IMPORTED_MODULE_1__.ApiError) {\n                if (err.status === 500) {\n                    errorMessage = \"サーバーエラーが発生しました。しばらく待ってから再試行してください。\";\n                } else if (err.status === 0 || err.message.includes(\"Network error\")) {\n                    errorMessage = \"バックエンドサーバーに接続できません。サーバーが起動しているか確認してください。\";\n                }\n            } else if (err instanceof Error && err.message.includes(\"Network error\")) {\n                errorMessage = \"ネットワークエラーが発生しました。接続を確認してください。\";\n            }\n            setError(errorMessage);\n            // エラーメッセージを追加（関数型更新を使用）\n            const errorMessageObj = {\n                id: (Date.now() + 1).toString(),\n                content: \"❌ \".concat(errorMessage),\n                role: \"assistant\",\n                timestamp: new Date()\n            };\n            setSessions((prevSessions)=>{\n                const errorSessions = prevSessions.map((session)=>session.id === sessionId ? {\n                        ...session,\n                        messages: [\n                            ...session.messages,\n                            errorMessageObj\n                        ],\n                        updatedAt: new Date()\n                    } : session);\n                saveSessions(errorSessions);\n                return errorSessions;\n            });\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        currentSessionId,\n        createNewSession,\n        saveSessions\n    ]);\n    return {\n        sessions,\n        currentSessionId,\n        messages,\n        sendMessage,\n        selectSession,\n        startNewChat,\n        isLoading,\n        error,\n        sessionState\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzNCLElBQUl3RSxJQUFJRSxNQUFNLEtBQUssS0FBSztvQkFDdEJELGVBQWU7Z0JBQ2pCLE9BQU8sSUFBSUQsSUFBSUUsTUFBTSxLQUFLLEtBQUtGLElBQUlHLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLGtCQUFrQjtvQkFDcEVILGVBQWU7Z0JBQ2pCO1lBQ0YsT0FBTyxJQUFJRCxlQUFlSyxTQUFTTCxJQUFJRyxPQUFPLENBQUNDLFFBQVEsQ0FBQyxrQkFBa0I7Z0JBQ3hFSCxlQUFlO1lBQ2pCO1lBRUEvRCxTQUFTK0Q7WUFFVCx3QkFBd0I7WUFDeEIsTUFBTUssa0JBQTJCO2dCQUMvQjlELElBQUksQ0FBQ1ksS0FBS1ksR0FBRyxLQUFLLEdBQUdDLFFBQVE7Z0JBQzdCVSxTQUFTLEtBQWtCLE9BQWJzQjtnQkFDZHJCLE1BQU07Z0JBQ05yQixXQUFXLElBQUlIO1lBQ2pCO1lBRUF4QixZQUFZMEMsQ0FBQUE7Z0JBQ1YsTUFBTWlDLGdCQUFnQmpDLGFBQWFyQixHQUFHLENBQUNDLENBQUFBLFVBQ3JDQSxRQUFRVixFQUFFLEtBQUt1QixZQUNYO3dCQUNFLEdBQUdiLE9BQU87d0JBQ1ZULFVBQVU7K0JBQUlTLFFBQVFULFFBQVE7NEJBQUU2RDt5QkFBZ0I7d0JBQ2hEakQsV0FBVyxJQUFJRDtvQkFDakIsSUFDQUY7Z0JBRU5PLGFBQWE4QztnQkFDYixPQUFPQTtZQUNUO1FBQ0YsU0FBVTtZQUNSdkUsYUFBYTtRQUNmO0lBQ0YsR0FBRztRQUFDSDtRQUFrQmdDO1FBQWtCSjtLQUFhO0lBRXJELE9BQU87UUFDTDlCO1FBQ0FFO1FBQ0FZO1FBQ0F3QztRQUNBVjtRQUNBQztRQUNBekM7UUFDQUU7UUFDQUU7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2hvb2tzL3VzZUNoYXQudHM/YmE3YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IE1lc3NhZ2UsIENoYXRTZXNzaW9uLCBBcGlNZXNzYWdlIH0gZnJvbSAnLi4vdHlwZXMvTWVzc2FnZSc7XG5pbXBvcnQgeyBhcGksIEFwaUVycm9yLCBTZXNzaW9uU3RhdGUsIE1lc3NhZ2VSZXF1ZXN0IH0gZnJvbSAnLi4vdXRpbHMvYXBpJztcbmltcG9ydCB0eXBlIHsgRmxvd0tleSB9IGZyb20gJ0AvdHlwZXMvZmxvdyc7XG5cbi8vIOOCu+ODg+OCt+ODp+ODs+euoeeQhuOCkuODreODvOOCq+ODq+OCueODiOODrOODvOOCuOOBq+awuOe2muWMllxuY29uc3QgU1RPUkFHRV9LRVkgPSAnY2hhdF9zZXNzaW9ucyc7XG5cbmV4cG9ydCBjb25zdCB1c2VDaGF0ID0gKCkgPT4ge1xuICBjb25zdCBbc2Vzc2lvbnMsIHNldFNlc3Npb25zXSA9IHVzZVN0YXRlPENoYXRTZXNzaW9uW10+KFtdKTtcbiAgY29uc3QgW2N1cnJlbnRTZXNzaW9uSWQsIHNldEN1cnJlbnRTZXNzaW9uSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzZXNzaW9uU3RhdGUsIHNldFNlc3Npb25TdGF0ZV0gPSB1c2VTdGF0ZTxTZXNzaW9uU3RhdGUgfCBudWxsPihudWxsKTtcbiAgXG4gIGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gc2Vzc2lvbnMuZmluZChzID0+IHMuaWQgPT09IGN1cnJlbnRTZXNzaW9uSWQpO1xuICBjb25zdCBtZXNzYWdlcyA9IGN1cnJlbnRTZXNzaW9uPy5tZXNzYWdlcyB8fCBbXTtcblxuICAvLyDjg63jg7zjgqvjg6vjgrnjg4jjg6zjg7zjgrjjgYvjgonjgrvjg4Pjgrfjg6fjg7PjgpLoqq3jgb/ovrzjgb9cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2F2ZWRTZXNzaW9ucyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZKTtcbiAgICAgIGlmIChzYXZlZFNlc3Npb25zKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc2F2ZWRTZXNzaW9ucyk7XG4gICAgICAgIC8vIERhdGUg44Kq44OW44K444Kn44Kv44OI44KS5b6p5YWDXG4gICAgICAgIGNvbnN0IHNlc3Npb25zV2l0aERhdGVzID0gcGFyc2VkLm1hcCgoc2Vzc2lvbjogYW55KSA9PiAoe1xuICAgICAgICAgIC4uLnNlc3Npb24sXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uLmNyZWF0ZWRBdCksXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uLnVwZGF0ZWRBdCksXG4gICAgICAgICAgbWVzc2FnZXM6IHNlc3Npb24ubWVzc2FnZXMubWFwKChtc2c6IGFueSkgPT4gKHtcbiAgICAgICAgICAgIC4uLm1zZyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUobXNnLnRpbWVzdGFtcClcbiAgICAgICAgICB9KSlcbiAgICAgICAgfSkpO1xuICAgICAgICBzZXRTZXNzaW9ucyhzZXNzaW9uc1dpdGhEYXRlcyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHNlc3Npb25zIGZyb20gbG9jYWxTdG9yYWdlOicsIGVycm9yKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICAvLyDjgrvjg4Pjgrfjg6fjg7PjgpLjg63jg7zjgqvjg6vjgrnjg4jjg6zjg7zjgrjjgavkv53lrZhcbiAgY29uc3Qgc2F2ZVNlc3Npb25zID0gdXNlQ2FsbGJhY2soKG5ld1Nlc3Npb25zOiBDaGF0U2Vzc2lvbltdKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShuZXdTZXNzaW9ucykpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBzZXNzaW9ucyB0byBsb2NhbFN0b3JhZ2U6JywgZXJyb3IpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNyZWF0ZU5ld1Nlc3Npb24gPSB1c2VDYWxsYmFjaygoZmlyc3RNZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBzZXNzaW9uSWQgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgdGl0bGUgPSBmaXJzdE1lc3NhZ2UubGVuZ3RoID4gMzAgPyBmaXJzdE1lc3NhZ2Uuc3Vic3RyaW5nKDAsIDMwKSArICcuLi4nIDogZmlyc3RNZXNzYWdlO1xuICAgIFxuICAgIGNvbnN0IG5ld1Nlc3Npb246IENoYXRTZXNzaW9uID0ge1xuICAgICAgaWQ6IHNlc3Npb25JZCxcbiAgICAgIHRpdGxlLFxuICAgICAgbWVzc2FnZXM6IFtdLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gICAgXG4gICAgc2V0U2Vzc2lvbnMocHJldlNlc3Npb25zID0+IHtcbiAgICAgIGNvbnN0IG5ld1Nlc3Npb25zID0gW25ld1Nlc3Npb24sIC4uLnByZXZTZXNzaW9uc107XG4gICAgICBzYXZlU2Vzc2lvbnMobmV3U2Vzc2lvbnMpO1xuICAgICAgcmV0dXJuIG5ld1Nlc3Npb25zO1xuICAgIH0pO1xuICAgIHNldEN1cnJlbnRTZXNzaW9uSWQoc2Vzc2lvbklkKTtcbiAgICByZXR1cm4gc2Vzc2lvbklkO1xuICB9LCBbc2F2ZVNlc3Npb25zXSk7XG5cbiAgY29uc3Qgc2VsZWN0U2Vzc2lvbiA9IHVzZUNhbGxiYWNrKChzZXNzaW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIHNldEN1cnJlbnRTZXNzaW9uSWQoc2Vzc2lvbklkKTtcbiAgICBzZXRFcnJvcihudWxsKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHN0YXJ0TmV3Q2hhdCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRDdXJyZW50U2Vzc2lvbklkKG51bGwpO1xuICAgIHNldEVycm9yKG51bGwpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgY29udmVydEFwaU1lc3NhZ2VUb01lc3NhZ2UgPSAoYXBpTXNnOiBBcGlNZXNzYWdlKTogTWVzc2FnZSA9PiAoe1xuICAgIGlkOiBhcGlNc2cuaWQsXG4gICAgY29udGVudDogYXBpTXNnLmNvbnRlbnQsXG4gICAgcm9sZTogYXBpTXNnLnR5cGUgPT09ICdhaScgPyAnYXNzaXN0YW50JyA6ICd1c2VyJyxcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKGFwaU1zZy50aW1lc3RhbXApLFxuICAgIHNlYXJjaFR5cGU6IChhcGlNc2cuc2VhcmNoX3R5cGUgPT09ICdmYWN0JyB8fCBhcGlNc2cuc2VhcmNoX3R5cGUgPT09ICduZXR3b3JrJykgPyBhcGlNc2cuc2VhcmNoX3R5cGUgOiB1bmRlZmluZWQsXG4gIH0pO1xuXG4gIGNvbnN0IHNlbmRNZXNzYWdlID0gdXNlQ2FsbGJhY2soYXN5bmMgKGNvbnRlbnQ6IHN0cmluZywgc2VhcmNoVHlwZT86ICdmYWN0JyB8ICduZXR3b3JrJywgZmxvd1N0ZXA/OiBGbG93S2V5LCBwcm9qZWN0SWQ/OiBzdHJpbmcpID0+IHtcbiAgICBsZXQgc2Vzc2lvbklkID0gY3VycmVudFNlc3Npb25JZDtcbiAgICBcbiAgICAvLyDmlrDjgZfjgYTjgrvjg4Pjgrfjg6fjg7PjgpLkvZzmiJDvvIjliJ3lm57jg6Hjg4Pjgrvjg7zjgrjjga7loLTlkIjvvIlcbiAgICBpZiAoIXNlc3Npb25JZCkge1xuICAgICAgc2Vzc2lvbklkID0gY3JlYXRlTmV3U2Vzc2lvbihjb250ZW50KTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyTWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICBjb250ZW50LFxuICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgc2VhcmNoVHlwZTogKHNlYXJjaFR5cGUgPT09ICdmYWN0JyB8fCBzZWFyY2hUeXBlID09PSAnbmV0d29yaycpID8gc2VhcmNoVHlwZSA6IHVuZGVmaW5lZCxcbiAgICB9O1xuXG4gICAgLy8g44Om44O844K244O844Oh44OD44K744O844K444KS6L+95Yqg77yI6Zai5pWw5Z6L5pu05paw44KS5L2/55So77yJXG4gICAgc2V0U2Vzc2lvbnMocHJldlNlc3Npb25zID0+IHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRTZXNzaW9ucyA9IHByZXZTZXNzaW9ucy5tYXAoc2Vzc2lvbiA9PiBcbiAgICAgICAgc2Vzc2lvbi5pZCA9PT0gc2Vzc2lvbklkIFxuICAgICAgICAgID8geyBcbiAgICAgICAgICAgICAgLi4uc2Vzc2lvbiwgXG4gICAgICAgICAgICAgIG1lc3NhZ2VzOiBbLi4uc2Vzc2lvbi5tZXNzYWdlcywgdXNlck1lc3NhZ2VdLFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHNlc3Npb25cbiAgICAgICk7XG4gICAgICBzYXZlU2Vzc2lvbnModXBkYXRlZFNlc3Npb25zKTtcbiAgICAgIHJldHVybiB1cGRhdGVkU2Vzc2lvbnM7XG4gICAgfSk7XG4gICAgXG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgIHNldEVycm9yKG51bGwpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOODkOODg+OCr+OCqOODs+ODieOBq+ODoeODg+OCu+ODvOOCuOOCkumAgeS/oVxuICAgICAgY29uc3QgcmVxdWVzdERhdGE6IE1lc3NhZ2VSZXF1ZXN0ID0ge1xuICAgICAgICBjb250ZW50LFxuICAgICAgICBzZWFyY2hfdHlwZTogKHNlYXJjaFR5cGUgPz8gJ25vcm1hbCcpIGFzICdub3JtYWwnIHwgJ2ZhY3QnIHwgJ25ldHdvcmsnLFxuICAgICAgICBmbG93X3N0ZXA6IGZsb3dTdGVwLFxuICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uSWQhLFxuICAgICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWQsXG4gICAgICB9O1xuICAgICAgXG4gICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICBsZXQgYXNzaXN0YW50TWVzc2FnZTtcbiAgICAgIFxuICAgICAgLy8g5qSc57Si44K/44Kk44OX44GM5oyH5a6a44GV44KM44Gm44GE44KL5aC05ZCI44GvUkFHL+mAmuW4uOODgeODo+ODg+ODiEFQSeOCkuWEquWFiFxuICAgICAgLy8g77yI44OQ44OD44Kv44Ko44Oz44OJ5YG044GvIHNlYXJjaF90eXBlIOWEquWFiOOBp+WHpueQhuOBleOCjOOCi+OBn+OCgSBmbG93X3N0ZXAg5ZCM6YCB44Gn44KC5ZWP6aGM44Gq44GX77yJXG4gICAgICBpZiAoc2VhcmNoVHlwZSA9PT0gJ2ZhY3QnIHx8IHNlYXJjaFR5cGUgPT09ICduZXR3b3JrJykge1xuICAgICAgICByZXNwb25zZSA9IGF3YWl0IGFwaS5zZW5kTWVzc2FnZShyZXF1ZXN0RGF0YSk7XG4gICAgICAgIGFzc2lzdGFudE1lc3NhZ2UgPSBjb252ZXJ0QXBpTWVzc2FnZVRvTWVzc2FnZShyZXNwb25zZSk7XG4gICAgICB9IGVsc2UgaWYgKGZsb3dTdGVwKSB7XG4gICAgICAgIC8vIOODleODreODvOOCueODhuODg+ODl+OBjOOBguOCi+WgtOWQiOOBr+aflOi7n+OBquODneODquOCt+ODvOOCt+OCueODhuODoOOCkuS9v+eUqFxuICAgICAgICBjb25zdCBmbGV4aWJsZVJlc3BvbnNlID0gYXdhaXQgYXBpLnNlbmRGbGV4aWJsZVBvbGljeU1lc3NhZ2UocmVxdWVzdERhdGEpO1xuXG4gICAgICAgIC8vIOOCu+ODg+OCt+ODp+ODs+eKtuaFi+OCkuabtOaWsFxuICAgICAgICBpZiAoZmxleGlibGVSZXNwb25zZS5mdWxsX3N0YXRlKSB7XG4gICAgICAgICAgc2V0U2Vzc2lvblN0YXRlKHtcbiAgICAgICAgICAgIHNlc3Npb25faWQ6IGZsZXhpYmxlUmVzcG9uc2Uuc2Vzc2lvbl9pZCxcbiAgICAgICAgICAgIHByb2plY3RfaWQ6IGZsZXhpYmxlUmVzcG9uc2UucHJvamVjdF9pZCxcbiAgICAgICAgICAgIC4uLmZsZXhpYmxlUmVzcG9uc2UuZnVsbF9zdGF0ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXNzaXN0YW50TWVzc2FnZSA9IHtcbiAgICAgICAgICBpZDogZmxleGlibGVSZXNwb25zZS5pZCxcbiAgICAgICAgICBjb250ZW50OiBmbGV4aWJsZVJlc3BvbnNlLmNvbnRlbnQsXG4gICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcgYXMgY29uc3QsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShmbGV4aWJsZVJlc3BvbnNlLnRpbWVzdGFtcCksXG4gICAgICAgICAgc2VhcmNoVHlwZTogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBhcGkuc2VuZE1lc3NhZ2UocmVxdWVzdERhdGEpO1xuICAgICAgICBhc3Npc3RhbnRNZXNzYWdlID0gY29udmVydEFwaU1lc3NhZ2VUb01lc3NhZ2UocmVzcG9uc2UpO1xuICAgICAgfVxuXG4gICAgICAvLyBBSeODrOOCueODneODs+OCueOCkui/veWKoO+8iOmWouaVsOWei+abtOaWsOOCkuS9v+eUqO+8iVxuICAgICAgc2V0U2Vzc2lvbnMocHJldlNlc3Npb25zID0+IHtcbiAgICAgICAgY29uc3QgZmluYWxTZXNzaW9ucyA9IHByZXZTZXNzaW9ucy5tYXAoc2Vzc2lvbiA9PiBcbiAgICAgICAgICBzZXNzaW9uLmlkID09PSBzZXNzaW9uSWQgXG4gICAgICAgICAgICA/IHsgXG4gICAgICAgICAgICAgICAgLi4uc2Vzc2lvbiwgXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IFsuLi5zZXNzaW9uLm1lc3NhZ2VzLCBhc3Npc3RhbnRNZXNzYWdlXSxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBzZXNzaW9uXG4gICAgICAgICk7XG4gICAgICAgIHNhdmVTZXNzaW9ucyhmaW5hbFNlc3Npb25zKTtcbiAgICAgICAgcmV0dXJuIGZpbmFsU2Vzc2lvbnM7XG4gICAgICB9KTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNlbmQgbWVzc2FnZTonLCBlcnIpO1xuICAgICAgXG4gICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ+ODoeODg+OCu+ODvOOCuOOBrumAgeS/oeOBq+WkseaVl+OBl+OBvuOBl+OBn+OAgic7XG4gICAgICBcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBBcGlFcnJvcikge1xuICAgICAgICBpZiAoZXJyLnN0YXR1cyA9PT0gNTAwKSB7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gJ+OCteODvOODkOODvOOCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBn+OAguOBl+OBsOOCieOBj+W+heOBo+OBpuOBi+OCieWGjeippuihjOOBl+OBpuOBj+OBoOOBleOBhOOAgic7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyLnN0YXR1cyA9PT0gMCB8fCBlcnIubWVzc2FnZS5pbmNsdWRlcygnTmV0d29yayBlcnJvcicpKSB7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gJ+ODkOODg+OCr+OCqOODs+ODieOCteODvOODkOODvOOBq+aOpee2muOBp+OBjeOBvuOBm+OCk+OAguOCteODvOODkOODvOOBjOi1t+WLleOBl+OBpuOBhOOCi+OBi+eiuuiqjeOBl+OBpuOBj+OBoOOBleOBhOOAgic7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ05ldHdvcmsgZXJyb3InKSkge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSAn44ON44OD44OI44Ov44O844Kv44Ko44Op44O844GM55m655Sf44GX44G+44GX44Gf44CC5o6l57aa44KS56K66KqN44GX44Gm44GP44Gg44GV44GE44CCJztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2V0RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgIFxuICAgICAgLy8g44Ko44Op44O844Oh44OD44K744O844K444KS6L+95Yqg77yI6Zai5pWw5Z6L5pu05paw44KS5L2/55So77yJXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2VPYmo6IE1lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiAoRGF0ZS5ub3coKSArIDEpLnRvU3RyaW5nKCksXG4gICAgICAgIGNvbnRlbnQ6IGDinYwgJHtlcnJvck1lc3NhZ2V9YCxcbiAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH07XG5cbiAgICAgIHNldFNlc3Npb25zKHByZXZTZXNzaW9ucyA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yU2Vzc2lvbnMgPSBwcmV2U2Vzc2lvbnMubWFwKHNlc3Npb24gPT4gXG4gICAgICAgICAgc2Vzc2lvbi5pZCA9PT0gc2Vzc2lvbklkIFxuICAgICAgICAgICAgPyB7IFxuICAgICAgICAgICAgICAgIC4uLnNlc3Npb24sIFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbLi4uc2Vzc2lvbi5tZXNzYWdlcywgZXJyb3JNZXNzYWdlT2JqXSxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBzZXNzaW9uXG4gICAgICAgICk7XG4gICAgICAgIHNhdmVTZXNzaW9ucyhlcnJvclNlc3Npb25zKTtcbiAgICAgICAgcmV0dXJuIGVycm9yU2Vzc2lvbnM7XG4gICAgICB9KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtjdXJyZW50U2Vzc2lvbklkLCBjcmVhdGVOZXdTZXNzaW9uLCBzYXZlU2Vzc2lvbnNdKTtcblxuICByZXR1cm4ge1xuICAgIHNlc3Npb25zLFxuICAgIGN1cnJlbnRTZXNzaW9uSWQsXG4gICAgbWVzc2FnZXMsXG4gICAgc2VuZE1lc3NhZ2UsXG4gICAgc2VsZWN0U2Vzc2lvbixcbiAgICBzdGFydE5ld0NoYXQsXG4gICAgaXNMb2FkaW5nLFxuICAgIGVycm9yLFxuICAgIHNlc3Npb25TdGF0ZSxcbiAgfTtcbn07Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJhcGkiLCJBcGlFcnJvciIsIlNUT1JBR0VfS0VZIiwidXNlQ2hhdCIsInNlc3Npb25zIiwic2V0U2Vzc2lvbnMiLCJjdXJyZW50U2Vzc2lvbklkIiwic2V0Q3VycmVudFNlc3Npb25JZCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJzZXNzaW9uU3RhdGUiLCJzZXRTZXNzaW9uU3RhdGUiLCJjdXJyZW50U2Vzc2lvbiIsImZpbmQiLCJzIiwiaWQiLCJtZXNzYWdlcyIsInNhdmVkU2Vzc2lvbnMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwic2Vzc2lvbnNXaXRoRGF0ZXMiLCJtYXAiLCJzZXNzaW9uIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsIm1zZyIsInRpbWVzdGFtcCIsImNvbnNvbGUiLCJzYXZlU2Vzc2lvbnMiLCJuZXdTZXNzaW9ucyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjcmVhdGVOZXdTZXNzaW9uIiwiZmlyc3RNZXNzYWdlIiwic2Vzc2lvbklkIiwibm93IiwidG9TdHJpbmciLCJ0aXRsZSIsImxlbmd0aCIsInN1YnN0cmluZyIsIm5ld1Nlc3Npb24iLCJwcmV2U2Vzc2lvbnMiLCJzZWxlY3RTZXNzaW9uIiwic3RhcnROZXdDaGF0IiwiY29udmVydEFwaU1lc3NhZ2VUb01lc3NhZ2UiLCJhcGlNc2ciLCJjb250ZW50Iiwicm9sZSIsInR5cGUiLCJzZWFyY2hUeXBlIiwic2VhcmNoX3R5cGUiLCJ1bmRlZmluZWQiLCJzZW5kTWVzc2FnZSIsImZsb3dTdGVwIiwicHJvamVjdElkIiwidXNlck1lc3NhZ2UiLCJ1cGRhdGVkU2Vzc2lvbnMiLCJyZXF1ZXN0RGF0YSIsImZsb3dfc3RlcCIsInNlc3Npb25faWQiLCJwcm9qZWN0X2lkIiwicmVzcG9uc2UiLCJhc3Npc3RhbnRNZXNzYWdlIiwiZmxleGlibGVSZXNwb25zZSIsInNlbmRGbGV4aWJsZVBvbGljeU1lc3NhZ2UiLCJmdWxsX3N0YXRlIiwiZmluYWxTZXNzaW9ucyIsImVyciIsImVycm9yTWVzc2FnZSIsInN0YXR1cyIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsIkVycm9yIiwiZXJyb3JNZXNzYWdlT2JqIiwiZXJyb3JTZXNzaW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useChat.ts\n"));

/***/ })

});