(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{1357:function(e,n,t){Promise.resolve().then(t.bind(t,661))},257:function(e,n,t){"use strict";var s,r;e.exports=(null==(s=t.g.process)?void 0:s.env)&&"object"==typeof(null==(r=t.g.process)?void 0:r.env)?t.g.process:t(4227)},4227:function(e){!function(){var n={229:function(e){var n,t,s,r=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{t="function"==typeof clearTimeout?clearTimeout:a}catch(e){t=a}}();var c=[],l=!1,d=-1;function u(){l&&s&&(l=!1,s.length?c=s.concat(c):d=-1,c.length&&h())}function h(){if(!l){var e=i(u);l=!0;for(var n=c.length;n;){for(s=c,c=[];++d<n;)s&&s[d].run();d=-1,n=c.length}s=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===a||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(n){try{return t.call(null,e)}catch(n){return t.call(this,e)}}}(e)}}function f(e,n){this.fun=e,this.array=n}function p(){}r.nextTick=function(e){var n=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];c.push(new f(e,n)),1!==c.length||l||i(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},t={};function s(e){var r=t[e];if(void 0!==r)return r.exports;var o=t[e]={exports:{}},a=!0;try{n[e](o,o.exports,s),a=!1}finally{a&&delete t[e]}return o.exports}s.ab="//";var r=s(229);e.exports=r}()},661:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return i}});var s=t(7437),r=t(2265),o=t(1121),a=t(257);function i(){let[e,n]=(0,r.useState)(null),[t,i]=(0,r.useState)(null),[c,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{n({hostname:window.location.hostname,origin:window.location.origin,isProd:"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname&&!window.location.hostname.includes("localhost"),envVariable:"https://aps-junk-02-h7hxetfcdkfpeydk.canadacentral-01.azurewebsites.net",userAgent:navigator.userAgent})},[]);let d=async()=>{l(!0),i(null);try{let e=await o.h.healthCheck();i("✅ Connection successful: ".concat(JSON.stringify(e)))}catch(e){i("❌ Connection failed: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{l(!1)}};return(0,s.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Environment Debug"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg",children:[(0,s.jsx)("h2",{className:"font-semibold mb-2",children:"Build-time Environment Variables:"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"NEXT_PUBLIC_API_ENDPOINT:"})," ","https://aps-junk-02-h7hxetfcdkfpeydk.canadacentral-01.azurewebsites.net"]}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"All NEXT_PUBLIC_ variables:"}),(0,s.jsx)("pre",{className:"bg-white p-2 mt-2 rounded text-sm overflow-auto",children:JSON.stringify(Object.fromEntries(Object.entries(a.env).filter(e=>{let[n]=e;return n.startsWith("NEXT_PUBLIC_")})),null,2)})]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,s.jsx)("h2",{className:"font-semibold mb-2",children:"Client-side Runtime Info:"}),e&&(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Hostname:"})," ",e.hostname]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Origin:"})," ",e.origin]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Is Production:"})," ",e.isProd?"Yes":"No"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Environment Variable:"})," ",e.envVariable||"undefined"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"User Agent:"})," ",e.userAgent]})]})]}),(0,s.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,s.jsx)("h2",{className:"font-semibold mb-2",children:"API Connection Test:"}),(0,s.jsx)("button",{onClick:d,disabled:c,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50 mr-4",children:c?"Testing...":"Test API Connection"}),t&&(0,s.jsx)("div",{className:"mt-3 p-3 bg-white border rounded",children:(0,s.jsx)("pre",{className:"text-sm whitespace-pre-wrap",children:t})})]}),(0,s.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,s.jsx)("h2",{className:"font-semibold mb-2",children:"Manual Tests:"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Local API:"}),(0,s.jsx)("a",{href:"http://127.0.0.1:8000",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline ml-2",children:"http://127.0.0.1:8000"})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Azure API:"}),(0,s.jsx)("a",{href:"https://aps-junk-02-h7hxetfcdkfpeydk.canadacentral-01.azurewebsites.net",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline ml-2",children:"https://aps-junk-02-h7hxetfcdkfpeydk.canadacentral-01.azurewebsites.net"})]})]})]})]})]})}},1121:function(e,n,t){"use strict";t.d(n,{M:function(){return r},h:function(){return a}});let s=(()=>{let e="https://aps-junk-02-h7hxetfcdkfpeydk.canadacentral-01.azurewebsites.net";{let n="localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname&&!window.location.hostname.includes("localhost");n&&!e&&(e="https://aps-junk-02-h7hxetfcdkfpeydk.canadacentral-01.azurewebsites.net",console.warn("Production environment detected but NEXT_PUBLIC_API_ENDPOINT not set. Using default production API.")),console.log("Client-side env check:",{hostname:window.location.hostname,isProd:n,envVariable:"https://aps-junk-02-h7hxetfcdkfpeydk.canadacentral-01.azurewebsites.net",resolvedEndpoint:e})}let n=e||"http://127.0.0.1:8000";return console.log("Environment variable NEXT_PUBLIC_API_ENDPOINT:","https://aps-junk-02-h7hxetfcdkfpeydk.canadacentral-01.azurewebsites.net"),console.log("Using API endpoint:",n),n})();class r extends Error{constructor(e,n){super(n),this.status=e,this.name="ApiError"}}async function o(e,n){let t="".concat(s).concat(e);console.log("API Request: ".concat((null==n?void 0:n.method)||"GET"," ").concat(t));try{let e=await fetch(t,{headers:{"Content-Type":"application/json",...null==n?void 0:n.headers},mode:"cors",credentials:"omit",...n});if(console.log("API Response: ".concat(e.status," ").concat(e.statusText)),!e.ok){let n=await e.text().catch(()=>"Unable to read error response");throw console.error("API Error Response: ".concat(n)),new r(e.status,"HTTP error! status: ".concat(e.status,", message: ").concat(n))}let s=await e.json();return console.log("API Success:",s),s}catch(e){if(console.error("API Fetch Error:",e),e instanceof r)throw e;if(e instanceof TypeError&&e.message.includes("fetch"))throw Error("Network error: Unable to connect to server. Please check your internet connection and try again.");throw Error("Network error: ".concat(e instanceof Error?e.message:"Unknown error"))}}let a={sendMessage:async e=>o("/api/chat",{method:"POST",body:JSON.stringify(e)}),getSessions:async()=>o("/api/sessions"),createSession:async()=>o("/api/sessions",{method:"POST"}),sendFlexiblePolicyMessage:async e=>o("/api/policy-flexible",{method:"POST",body:JSON.stringify(e)}),getSessionState:async e=>o("/api/session-state/".concat(e)),async healthCheck(){try{return await o("/")}catch(e){throw console.error("Health check failed:",e),e}},async testConnection(){try{return await this.healthCheck(),!0}catch(e){return console.error("Connection test failed:",e),!1}}}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1357)}),_N_E=e.O()}]);