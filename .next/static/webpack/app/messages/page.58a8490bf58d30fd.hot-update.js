"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/messages/page",{

/***/ "(app-pages-browser)/./src/hooks/useChat.ts":
/*!******************************!*\
  !*** ./src/hooks/useChat.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useChat: function() { return /* binding */ useChat; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/api */ \"(app-pages-browser)/./src/utils/api.ts\");\n\n\n// セッション管理をローカルストレージに永続化\nconst STORAGE_KEY = \"chat_sessions\";\nconst useChat = ()=>{\n    const [sessions, setSessions] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [currentSessionId, setCurrentSessionId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const currentSession = sessions.find((s)=>s.id === currentSessionId);\n    const messages = (currentSession === null || currentSession === void 0 ? void 0 : currentSession.messages) || [];\n    // ローカルストレージからセッションを読み込み\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        try {\n            const savedSessions = localStorage.getItem(STORAGE_KEY);\n            if (savedSessions) {\n                const parsed = JSON.parse(savedSessions);\n                // Date オブジェクトを復元\n                const sessionsWithDates = parsed.map((session)=>({\n                        ...session,\n                        createdAt: new Date(session.createdAt),\n                        updatedAt: new Date(session.updatedAt),\n                        messages: session.messages.map((msg)=>({\n                                ...msg,\n                                timestamp: new Date(msg.timestamp)\n                            }))\n                    }));\n                setSessions(sessionsWithDates);\n            }\n        } catch (error) {\n            console.error(\"Failed to load sessions from localStorage:\", error);\n        }\n    }, []);\n    // セッションをローカルストレージに保存\n    const saveSessions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((newSessions)=>{\n        try {\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(newSessions));\n        } catch (error) {\n            console.error(\"Failed to save sessions to localStorage:\", error);\n        }\n    }, []);\n    const createNewSession = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((firstMessage)=>{\n        const sessionId = Date.now().toString();\n        const title = firstMessage.length > 30 ? firstMessage.substring(0, 30) + \"...\" : firstMessage;\n        const newSession = {\n            id: sessionId,\n            title,\n            messages: [],\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        setSessions((prevSessions)=>{\n            const newSessions = [\n                newSession,\n                ...prevSessions\n            ];\n            saveSessions(newSessions);\n            return newSessions;\n        });\n        setCurrentSessionId(sessionId);\n        return sessionId;\n    }, [\n        saveSessions\n    ]);\n    const selectSession = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((sessionId)=>{\n        setCurrentSessionId(sessionId);\n        setError(null);\n    }, []);\n    const startNewChat = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        setCurrentSessionId(null);\n        setError(null);\n    }, []);\n    const convertApiMessageToMessage = (apiMsg)=>({\n            id: apiMsg.id,\n            content: apiMsg.content,\n            role: apiMsg.type === \"ai\" ? \"assistant\" : \"user\",\n            timestamp: new Date(apiMsg.timestamp),\n            searchType: apiMsg.search_type === \"fact\" || apiMsg.search_type === \"network\" ? apiMsg.search_type : undefined\n        });\n    const sendMessage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (content, searchType, flowStep)=>{\n        console.log(\"useChat.sendMessage called with:\", {\n            content,\n            searchType,\n            flowStep\n        });\n        let sessionId = currentSessionId;\n        // 新しいセッションを作成（初回メッセージの場合）\n        if (!sessionId) {\n            sessionId = createNewSession(content);\n        }\n        const userMessage = {\n            id: Date.now().toString(),\n            content,\n            role: \"user\",\n            timestamp: new Date(),\n            searchType: searchType === \"fact\" || searchType === \"network\" ? searchType : undefined\n        };\n        // ユーザーメッセージを追加（関数型更新を使用）\n        setSessions((prevSessions)=>{\n            const updatedSessions = prevSessions.map((session)=>session.id === sessionId ? {\n                    ...session,\n                    messages: [\n                        ...session.messages,\n                        userMessage\n                    ],\n                    updatedAt: new Date()\n                } : session);\n            saveSessions(updatedSessions);\n            return updatedSessions;\n        });\n        setIsLoading(true);\n        setError(null);\n        try {\n            // バックエンドにメッセージを送信\n            const requestData = {\n                content,\n                search_type: searchType || \"normal\",\n                flow_step: flowStep\n            };\n            console.log(\"API request data:\", requestData);\n            const response = await _utils_api__WEBPACK_IMPORTED_MODULE_1__.api.sendMessage(requestData);\n            const assistantMessage = convertApiMessageToMessage(response);\n            // AIレスポンスを追加（関数型更新を使用）\n            setSessions((prevSessions)=>{\n                const finalSessions = prevSessions.map((session)=>session.id === sessionId ? {\n                        ...session,\n                        messages: [\n                            ...session.messages,\n                            assistantMessage\n                        ],\n                        updatedAt: new Date()\n                    } : session);\n                saveSessions(finalSessions);\n                return finalSessions;\n            });\n        } catch (err) {\n            console.error(\"Failed to send message:\", err);\n            let errorMessage = \"メッセージの送信に失敗しました。\";\n            if (err instanceof _utils_api__WEBPACK_IMPORTED_MODULE_1__.ApiError) {\n                if (err.status === 500) {\n                    errorMessage = \"サーバーエラーが発生しました。しばらく待ってから再試行してください。\";\n                } else if (err.status === 0 || err.message.includes(\"Network error\")) {\n                    errorMessage = \"バックエンドサーバーに接続できません。サーバーが起動しているか確認してください。\";\n                }\n            } else if (err instanceof Error && err.message.includes(\"Network error\")) {\n                errorMessage = \"ネットワークエラーが発生しました。接続を確認してください。\";\n            }\n            setError(errorMessage);\n            // エラーメッセージを追加（関数型更新を使用）\n            const errorMessageObj = {\n                id: (Date.now() + 1).toString(),\n                content: \"❌ \".concat(errorMessage),\n                role: \"assistant\",\n                timestamp: new Date()\n            };\n            setSessions((prevSessions)=>{\n                const errorSessions = prevSessions.map((session)=>session.id === sessionId ? {\n                        ...session,\n                        messages: [\n                            ...session.messages,\n                            errorMessageObj\n                        ],\n                        updatedAt: new Date()\n                    } : session);\n                saveSessions(errorSessions);\n                return errorSessions;\n            });\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        currentSessionId,\n        createNewSession,\n        saveSessions\n    ]);\n    return {\n        sessions,\n        currentSessionId,\n        messages,\n        sendMessage,\n        selectSession,\n        startNewChat,\n        isLoading,\n        error\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2VDaGF0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBeUQ7QUFFWjtBQUU3Qyx3QkFBd0I7QUFDeEIsTUFBTUssY0FBYztBQUViLE1BQU1DLFVBQVU7SUFDckIsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUdSLCtDQUFRQSxDQUFnQixFQUFFO0lBQzFELE1BQU0sQ0FBQ1Msa0JBQWtCQyxvQkFBb0IsR0FBR1YsK0NBQVFBLENBQWdCO0lBQ3hFLE1BQU0sQ0FBQ1csV0FBV0MsYUFBYSxHQUFHWiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUNhLE9BQU9DLFNBQVMsR0FBR2QsK0NBQVFBLENBQWdCO0lBRWxELE1BQU1lLGlCQUFpQlIsU0FBU1MsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxFQUFFLEtBQUtUO0lBQ25ELE1BQU1VLFdBQVdKLENBQUFBLDJCQUFBQSxxQ0FBQUEsZUFBZ0JJLFFBQVEsS0FBSSxFQUFFO0lBRS9DLHdCQUF3QjtJQUN4QmpCLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSTtZQUNGLE1BQU1rQixnQkFBZ0JDLGFBQWFDLE9BQU8sQ0FBQ2pCO1lBQzNDLElBQUllLGVBQWU7Z0JBQ2pCLE1BQU1HLFNBQVNDLEtBQUtDLEtBQUssQ0FBQ0w7Z0JBQzFCLGlCQUFpQjtnQkFDakIsTUFBTU0sb0JBQW9CSCxPQUFPSSxHQUFHLENBQUMsQ0FBQ0MsVUFBa0I7d0JBQ3RELEdBQUdBLE9BQU87d0JBQ1ZDLFdBQVcsSUFBSUMsS0FBS0YsUUFBUUMsU0FBUzt3QkFDckNFLFdBQVcsSUFBSUQsS0FBS0YsUUFBUUcsU0FBUzt3QkFDckNaLFVBQVVTLFFBQVFULFFBQVEsQ0FBQ1EsR0FBRyxDQUFDLENBQUNLLE1BQWM7Z0NBQzVDLEdBQUdBLEdBQUc7Z0NBQ05DLFdBQVcsSUFBSUgsS0FBS0UsSUFBSUMsU0FBUzs0QkFDbkM7b0JBQ0Y7Z0JBQ0F6QixZQUFZa0I7WUFDZDtRQUNGLEVBQUUsT0FB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Q0FGO2dCQUVOTyxhQUFheUM7Z0JBQ2IsT0FBT0E7WUFDVDtRQUNGLFNBQVU7WUFDUmhFLGFBQWE7UUFDZjtJQUNGLEdBQUc7UUFBQ0g7UUFBa0I4QjtRQUFrQko7S0FBYTtJQUVyRCxPQUFPO1FBQ0w1QjtRQUNBRTtRQUNBVTtRQUNBd0M7UUFDQVY7UUFDQUM7UUFDQXZDO1FBQ0FFO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9ob29rcy91c2VDaGF0LnRzP2JhN2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBNZXNzYWdlLCBDaGF0U2Vzc2lvbiwgQXBpTWVzc2FnZSB9IGZyb20gJy4uL3R5cGVzL01lc3NhZ2UnO1xuaW1wb3J0IHsgYXBpLCBBcGlFcnJvciB9IGZyb20gJy4uL3V0aWxzL2FwaSc7XG5cbi8vIOOCu+ODg+OCt+ODp+ODs+euoeeQhuOCkuODreODvOOCq+ODq+OCueODiOODrOODvOOCuOOBq+awuOe2muWMllxuY29uc3QgU1RPUkFHRV9LRVkgPSAnY2hhdF9zZXNzaW9ucyc7XG5cbmV4cG9ydCBjb25zdCB1c2VDaGF0ID0gKCkgPT4ge1xuICBjb25zdCBbc2Vzc2lvbnMsIHNldFNlc3Npb25zXSA9IHVzZVN0YXRlPENoYXRTZXNzaW9uW10+KFtdKTtcbiAgY29uc3QgW2N1cnJlbnRTZXNzaW9uSWQsIHNldEN1cnJlbnRTZXNzaW9uSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIFxuICBjb25zdCBjdXJyZW50U2Vzc2lvbiA9IHNlc3Npb25zLmZpbmQocyA9PiBzLmlkID09PSBjdXJyZW50U2Vzc2lvbklkKTtcbiAgY29uc3QgbWVzc2FnZXMgPSBjdXJyZW50U2Vzc2lvbj8ubWVzc2FnZXMgfHwgW107XG5cbiAgLy8g44Ot44O844Kr44Or44K544OI44Os44O844K444GL44KJ44K744OD44K344On44Oz44KS6Kqt44G/6L6844G/XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNhdmVkU2Vzc2lvbnMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7XG4gICAgICBpZiAoc2F2ZWRTZXNzaW9ucykge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHNhdmVkU2Vzc2lvbnMpO1xuICAgICAgICAvLyBEYXRlIOOCquODluOCuOOCp+OCr+ODiOOCkuW+qeWFg1xuICAgICAgICBjb25zdCBzZXNzaW9uc1dpdGhEYXRlcyA9IHBhcnNlZC5tYXAoKHNlc3Npb246IGFueSkgPT4gKHtcbiAgICAgICAgICAuLi5zZXNzaW9uLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoc2Vzc2lvbi5jcmVhdGVkQXQpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoc2Vzc2lvbi51cGRhdGVkQXQpLFxuICAgICAgICAgIG1lc3NhZ2VzOiBzZXNzaW9uLm1lc3NhZ2VzLm1hcCgobXNnOiBhbnkpID0+ICh7XG4gICAgICAgICAgICAuLi5tc2csXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKG1zZy50aW1lc3RhbXApXG4gICAgICAgICAgfSkpXG4gICAgICAgIH0pKTtcbiAgICAgICAgc2V0U2Vzc2lvbnMoc2Vzc2lvbnNXaXRoRGF0ZXMpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBzZXNzaW9ucyBmcm9tIGxvY2FsU3RvcmFnZTonLCBlcnJvcik7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8g44K744OD44K344On44Oz44KS44Ot44O844Kr44Or44K544OI44Os44O844K444Gr5L+d5a2YXG4gIGNvbnN0IHNhdmVTZXNzaW9ucyA9IHVzZUNhbGxiYWNrKChuZXdTZXNzaW9uczogQ2hhdFNlc3Npb25bXSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkobmV3U2Vzc2lvbnMpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgc2Vzc2lvbnMgdG8gbG9jYWxTdG9yYWdlOicsIGVycm9yKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBjcmVhdGVOZXdTZXNzaW9uID0gdXNlQ2FsbGJhY2soKGZpcnN0TWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3Qgc2Vzc2lvbklkID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgIGNvbnN0IHRpdGxlID0gZmlyc3RNZXNzYWdlLmxlbmd0aCA+IDMwID8gZmlyc3RNZXNzYWdlLnN1YnN0cmluZygwLCAzMCkgKyAnLi4uJyA6IGZpcnN0TWVzc2FnZTtcbiAgICBcbiAgICBjb25zdCBuZXdTZXNzaW9uOiBDaGF0U2Vzc2lvbiA9IHtcbiAgICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgICB0aXRsZSxcbiAgICAgIG1lc3NhZ2VzOiBbXSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIFxuICAgIHNldFNlc3Npb25zKHByZXZTZXNzaW9ucyA9PiB7XG4gICAgICBjb25zdCBuZXdTZXNzaW9ucyA9IFtuZXdTZXNzaW9uLCAuLi5wcmV2U2Vzc2lvbnNdO1xuICAgICAgc2F2ZVNlc3Npb25zKG5ld1Nlc3Npb25zKTtcbiAgICAgIHJldHVybiBuZXdTZXNzaW9ucztcbiAgICB9KTtcbiAgICBzZXRDdXJyZW50U2Vzc2lvbklkKHNlc3Npb25JZCk7XG4gICAgcmV0dXJuIHNlc3Npb25JZDtcbiAgfSwgW3NhdmVTZXNzaW9uc10pO1xuXG4gIGNvbnN0IHNlbGVjdFNlc3Npb24gPSB1c2VDYWxsYmFjaygoc2Vzc2lvbklkOiBzdHJpbmcpID0+IHtcbiAgICBzZXRDdXJyZW50U2Vzc2lvbklkKHNlc3Npb25JZCk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBzdGFydE5ld0NoYXQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0Q3VycmVudFNlc3Npb25JZChudWxsKTtcbiAgICBzZXRFcnJvcihudWxsKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNvbnZlcnRBcGlNZXNzYWdlVG9NZXNzYWdlID0gKGFwaU1zZzogQXBpTWVzc2FnZSk6IE1lc3NhZ2UgPT4gKHtcbiAgICBpZDogYXBpTXNnLmlkLFxuICAgIGNvbnRlbnQ6IGFwaU1zZy5jb250ZW50LFxuICAgIHJvbGU6IGFwaU1zZy50eXBlID09PSAnYWknID8gJ2Fzc2lzdGFudCcgOiAndXNlcicsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZShhcGlNc2cudGltZXN0YW1wKSxcbiAgICBzZWFyY2hUeXBlOiAoYXBpTXNnLnNlYXJjaF90eXBlID09PSAnZmFjdCcgfHwgYXBpTXNnLnNlYXJjaF90eXBlID09PSAnbmV0d29yaycpID8gYXBpTXNnLnNlYXJjaF90eXBlIDogdW5kZWZpbmVkLFxuICB9KTtcblxuICBjb25zdCBzZW5kTWVzc2FnZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChjb250ZW50OiBzdHJpbmcsIHNlYXJjaFR5cGU/OiAnZmFjdCcgfCAnbmV0d29yaycsIGZsb3dTdGVwPzogc3RyaW5nKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3VzZUNoYXQuc2VuZE1lc3NhZ2UgY2FsbGVkIHdpdGg6JywgeyBjb250ZW50LCBzZWFyY2hUeXBlLCBmbG93U3RlcCB9KTtcbiAgICBsZXQgc2Vzc2lvbklkID0gY3VycmVudFNlc3Npb25JZDtcbiAgICBcbiAgICAvLyDmlrDjgZfjgYTjgrvjg4Pjgrfjg6fjg7PjgpLkvZzmiJDvvIjliJ3lm57jg6Hjg4Pjgrvjg7zjgrjjga7loLTlkIjvvIlcbiAgICBpZiAoIXNlc3Npb25JZCkge1xuICAgICAgc2Vzc2lvbklkID0gY3JlYXRlTmV3U2Vzc2lvbihjb250ZW50KTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyTWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICBjb250ZW50LFxuICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgc2VhcmNoVHlwZTogKHNlYXJjaFR5cGUgPT09ICdmYWN0JyB8fCBzZWFyY2hUeXBlID09PSAnbmV0d29yaycpID8gc2VhcmNoVHlwZSA6IHVuZGVmaW5lZCxcbiAgICB9O1xuXG4gICAgLy8g44Om44O844K244O844Oh44OD44K744O844K444KS6L+95Yqg77yI6Zai5pWw5Z6L5pu05paw44KS5L2/55So77yJXG4gICAgc2V0U2Vzc2lvbnMocHJldlNlc3Npb25zID0+IHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRTZXNzaW9ucyA9IHByZXZTZXNzaW9ucy5tYXAoc2Vzc2lvbiA9PiBcbiAgICAgICAgc2Vzc2lvbi5pZCA9PT0gc2Vzc2lvbklkIFxuICAgICAgICAgID8geyBcbiAgICAgICAgICAgICAgLi4uc2Vzc2lvbiwgXG4gICAgICAgICAgICAgIG1lc3NhZ2VzOiBbLi4uc2Vzc2lvbi5tZXNzYWdlcywgdXNlck1lc3NhZ2VdLFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHNlc3Npb25cbiAgICAgICk7XG4gICAgICBzYXZlU2Vzc2lvbnModXBkYXRlZFNlc3Npb25zKTtcbiAgICAgIHJldHVybiB1cGRhdGVkU2Vzc2lvbnM7XG4gICAgfSk7XG4gICAgXG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgIHNldEVycm9yKG51bGwpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOODkOODg+OCr+OCqOODs+ODieOBq+ODoeODg+OCu+ODvOOCuOOCkumAgeS/oVxuICAgICAgY29uc3QgcmVxdWVzdERhdGEgPSB7XG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIHNlYXJjaF90eXBlOiBzZWFyY2hUeXBlIHx8ICdub3JtYWwnLFxuICAgICAgICBmbG93X3N0ZXA6IGZsb3dTdGVwLFxuICAgICAgfTtcbiAgICAgIGNvbnNvbGUubG9nKCdBUEkgcmVxdWVzdCBkYXRhOicsIHJlcXVlc3REYXRhKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnNlbmRNZXNzYWdlKHJlcXVlc3REYXRhKTtcblxuICAgICAgY29uc3QgYXNzaXN0YW50TWVzc2FnZSA9IGNvbnZlcnRBcGlNZXNzYWdlVG9NZXNzYWdlKHJlc3BvbnNlKTtcblxuICAgICAgLy8gQUnjg6zjgrnjg53jg7PjgrnjgpLov73liqDvvIjplqLmlbDlnovmm7TmlrDjgpLkvb/nlKjvvIlcbiAgICAgIHNldFNlc3Npb25zKHByZXZTZXNzaW9ucyA9PiB7XG4gICAgICAgIGNvbnN0IGZpbmFsU2Vzc2lvbnMgPSBwcmV2U2Vzc2lvbnMubWFwKHNlc3Npb24gPT4gXG4gICAgICAgICAgc2Vzc2lvbi5pZCA9PT0gc2Vzc2lvbklkIFxuICAgICAgICAgICAgPyB7IFxuICAgICAgICAgICAgICAgIC4uLnNlc3Npb24sIFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbLi4uc2Vzc2lvbi5tZXNzYWdlcywgYXNzaXN0YW50TWVzc2FnZV0sXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogc2Vzc2lvblxuICAgICAgICApO1xuICAgICAgICBzYXZlU2Vzc2lvbnMoZmluYWxTZXNzaW9ucyk7XG4gICAgICAgIHJldHVybiBmaW5hbFNlc3Npb25zO1xuICAgICAgfSk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzZW5kIG1lc3NhZ2U6JywgZXJyKTtcbiAgICAgIFxuICAgICAgbGV0IGVycm9yTWVzc2FnZSA9ICfjg6Hjg4Pjgrvjg7zjgrjjga7pgIHkv6HjgavlpLHmlZfjgZfjgb7jgZfjgZ/jgIInO1xuICAgICAgXG4gICAgICBpZiAoZXJyIGluc3RhbmNlb2YgQXBpRXJyb3IpIHtcbiAgICAgICAgaWYgKGVyci5zdGF0dXMgPT09IDUwMCkge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICfjgrXjg7zjg5Djg7zjgqjjg6njg7zjgYznmbrnlJ/jgZfjgb7jgZfjgZ/jgILjgZfjgbDjgonjgY/lvoXjgaPjgabjgYvjgonlho3oqabooYzjgZfjgabjgY/jgaDjgZXjgYTjgIInO1xuICAgICAgICB9IGVsc2UgaWYgKGVyci5zdGF0dXMgPT09IDAgfHwgZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ05ldHdvcmsgZXJyb3InKSkge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICfjg5Djg4Pjgq/jgqjjg7Pjg4njgrXjg7zjg5Djg7zjgavmjqXntprjgafjgY3jgb7jgZvjgpPjgILjgrXjg7zjg5Djg7zjgYzotbfli5XjgZfjgabjgYTjgovjgYvnorroqo3jgZfjgabjgY/jgaDjgZXjgYTjgIInO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yICYmIGVyci5tZXNzYWdlLmluY2x1ZGVzKCdOZXR3b3JrIGVycm9yJykpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ+ODjeODg+ODiOODr+ODvOOCr+OCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBn+OAguaOpee2muOCkueiuuiqjeOBl+OBpuOBj+OBoOOBleOBhOOAgic7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICBcbiAgICAgIC8vIOOCqOODqeODvOODoeODg+OCu+ODvOOCuOOCkui/veWKoO+8iOmWouaVsOWei+abtOaWsOOCkuS9v+eUqO+8iVxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlT2JqOiBNZXNzYWdlID0ge1xuICAgICAgICBpZDogKERhdGUubm93KCkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICBjb250ZW50OiBg4p2MICR7ZXJyb3JNZXNzYWdlfWAsXG4gICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuXG4gICAgICBzZXRTZXNzaW9ucyhwcmV2U2Vzc2lvbnMgPT4ge1xuICAgICAgICBjb25zdCBlcnJvclNlc3Npb25zID0gcHJldlNlc3Npb25zLm1hcChzZXNzaW9uID0+IFxuICAgICAgICAgIHNlc3Npb24uaWQgPT09IHNlc3Npb25JZCBcbiAgICAgICAgICAgID8geyBcbiAgICAgICAgICAgICAgICAuLi5zZXNzaW9uLCBcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogWy4uLnNlc3Npb24ubWVzc2FnZXMsIGVycm9yTWVzc2FnZU9ial0sXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogc2Vzc2lvblxuICAgICAgICApO1xuICAgICAgICBzYXZlU2Vzc2lvbnMoZXJyb3JTZXNzaW9ucyk7XG4gICAgICAgIHJldHVybiBlcnJvclNlc3Npb25zO1xuICAgICAgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9LCBbY3VycmVudFNlc3Npb25JZCwgY3JlYXRlTmV3U2Vzc2lvbiwgc2F2ZVNlc3Npb25zXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBzZXNzaW9ucyxcbiAgICBjdXJyZW50U2Vzc2lvbklkLFxuICAgIG1lc3NhZ2VzLFxuICAgIHNlbmRNZXNzYWdlLFxuICAgIHNlbGVjdFNlc3Npb24sXG4gICAgc3RhcnROZXdDaGF0LFxuICAgIGlzTG9hZGluZyxcbiAgICBlcnJvcixcbiAgfTtcbn07Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJhcGkiLCJBcGlFcnJvciIsIlNUT1JBR0VfS0VZIiwidXNlQ2hhdCIsInNlc3Npb25zIiwic2V0U2Vzc2lvbnMiLCJjdXJyZW50U2Vzc2lvbklkIiwic2V0Q3VycmVudFNlc3Npb25JZCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJjdXJyZW50U2Vzc2lvbiIsImZpbmQiLCJzIiwiaWQiLCJtZXNzYWdlcyIsInNhdmVkU2Vzc2lvbnMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwic2Vzc2lvbnNXaXRoRGF0ZXMiLCJtYXAiLCJzZXNzaW9uIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsIm1zZyIsInRpbWVzdGFtcCIsImNvbnNvbGUiLCJzYXZlU2Vzc2lvbnMiLCJuZXdTZXNzaW9ucyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjcmVhdGVOZXdTZXNzaW9uIiwiZmlyc3RNZXNzYWdlIiwic2Vzc2lvbklkIiwibm93IiwidG9TdHJpbmciLCJ0aXRsZSIsImxlbmd0aCIsInN1YnN0cmluZyIsIm5ld1Nlc3Npb24iLCJwcmV2U2Vzc2lvbnMiLCJzZWxlY3RTZXNzaW9uIiwic3RhcnROZXdDaGF0IiwiY29udmVydEFwaU1lc3NhZ2VUb01lc3NhZ2UiLCJhcGlNc2ciLCJjb250ZW50Iiwicm9sZSIsInR5cGUiLCJzZWFyY2hUeXBlIiwic2VhcmNoX3R5cGUiLCJ1bmRlZmluZWQiLCJzZW5kTWVzc2FnZSIsImZsb3dTdGVwIiwibG9nIiwidXNlck1lc3NhZ2UiLCJ1cGRhdGVkU2Vzc2lvbnMiLCJyZXF1ZXN0RGF0YSIsImZsb3dfc3RlcCIsInJlc3BvbnNlIiwiYXNzaXN0YW50TWVzc2FnZSIsImZpbmFsU2Vzc2lvbnMiLCJlcnIiLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXMiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJFcnJvciIsImVycm9yTWVzc2FnZU9iaiIsImVycm9yU2Vzc2lvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useChat.ts\n"));

/***/ })

});